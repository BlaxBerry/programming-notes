# JSX

> **J**avaScript **X**ML

JSX 是 JavaScript 的语法扩展，用于在 JS、TS 文件中简化 HTML 的编写

其在运行时会被翻译为常规的 JavaScript 对象

## 基础语法

### 数据渲染

- 需要在大括号`{ }`内部包裹要渲染的数据或注释
- 字符串类型数据可直接写入标签，但为避免魔术字符串 ( Magic String ) 泛滥建议渲染变量
- 可通过函数的作用域在标签内执行 JS 脚本，但由于渲染性能的效率非常不推荐
- 布尔值、未定义、空值不会被渲染 ( `true`、`false`、`undefined`、`null` )

```jsx
<标签>{基本类型的数据}</标签>
<标签>{对象类型的数据.属性}</标签>

<标签>{"字符串类型数据"}</标签>
<标签>字符串类型数据</标签>

<标签>
    {(() => {
        // 执行 JS 脚本
        // return 返回要渲染的子标签
    })()}
</标签>

<标签>
    {/* 单行注释 */}
    {/*
        多行注释
        多行注释
    */}
</标签>
```

---

### 条件判断

一般建议使用布尔值作为判断的条件

空数组`[]`、空对象`{}`不能直接作为条件，需要转为布尔类型否则永远被视为`true`

```jsx
// 逻辑运算符
<标签>{条件 && <标签/>}</标签>
<标签>{条件 || <标签/>}</标签>

// 三元运算符
<标签>{条件 ? 数据 : 数据}</标签>
```

::: warning 三元表达式的坑

- 三元表达式多层嵌套时可读性差，建议改用逻辑运算符形成单独判断分支

```jsx{0}
<标签>
    {条件1 ? <A /> : 条件2 ? <B /> : 条件3 ? <C /> : <D />}     // [!code --]

    {条件1 && <A />}                    // [!code ++]
    {条件2 && <B />}                    // [!code ++]
    {条件3 && <C />}                    // [!code ++]
    {条件4 && <D />}                    // [!code ++]
</标签>
```

- 三元表达式切换同名输入类控件切换时会有数据残留问题
  - 可添加唯一标识 key 来区分切换前后的同名标签
  - 可改用逻辑运算符形成单独判断分支

```jsx{0}
<标签>
    { showText ? <input type="text" /> : <input type="password" /> } // [!code --]

    {                                           // [!code ++]
      showText ? (                              // [!code ++]
        <input key="txt" type="text" />         // [!code ++]
      ) : (                                     // [!code ++]
        <input key="pwd" type="password" />     // [!code ++]
      );                                        // [!code ++]
    }                                           // [!code ++]

    { showText && <input type="text" /> }       // [!code ++]
    { !showText && <input type="password" /> }  // [!code ++]
</标签>
```

:::

::: warning 逻辑运算符的坑

- 数值`0`作为条件时会被直接渲染
  - 可改为使用布尔值判断
  - 可改用三元表达式判断

```jsx{0}
<标签>
    {0 && <标签 />}             // [!code --]
    {[].length && <标签 />}     // [!code --]

    {!!0 && <标签 />}           // [!code ++]
    {!![].length && <标签 />}   // [!code ++]
    {Boolean([]) && <标签 />}   // [!code ++]

    {0 ? <标签 /> : <标签 />}   // [!code ++]
</标签>
```

:::

---

### 数据遍历

实质是利用数组的遍历方法 ( `map()`、`filter()` )

```jsx
<标签>
    {数组类型数据.map(数组元素 => {
        return <标签 key={唯一标识} />
    })}
</标签>

<标签>
    {数组类型数据.map(数组元素 => (
        <标签 key={唯一标识} />
    ))}
</标签>
```

## 编码规范

一般使用 ESLint 与 Prettier 检查代码与格式化

::: tip 可参考的风格:

- [Airbnb React/JSX Style](https://github.com/JasonBoy/javascript/tree/master/react)

:::
